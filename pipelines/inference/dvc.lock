schema: '2.0'
stages:
  classify_queries:
    cmd: PYTHONPATH=. python pipelines/inference/classify_queries.py mini_imagenet
    deps:
    - path: data/features/mini_imagenet.pickle
      md5: f0a320542b15f255e9512dc251696939
      size: 384033495
    - path: pipelines/inference/classify_queries.py
      md5: abf40cf845c8eb63f0fca8fd2639d0d7
      size: 3683
    outs:
    - path: data/predictions/classifications.csv
      md5: e28c955be1f289a99a20bbc158964b56
      size: 25951
  detect_outliers:
    cmd: PYTHONPATH=. python pipelines/inference/detect_outliers.py mini_imagenet
    deps:
    - path: data/features/mini_imagenet.pickle
      md5: f0a320542b15f255e9512dc251696939
      size: 384033495
    - path: pipelines/inference/detect_outliers.py
      md5: 10f60f1370f526a1eabfb67723eec58f
      size: 2560
    outs:
    - path: data/predictions/outliers.csv
      md5: 301e58f86074f616d0d251ea33e3b53a
      size: 22036
  compute_metrics:
    cmd: PYTHONPATH=. python pipelines/inference/compute_metrics.py mini_imagenet
    deps:
    - path: data/predictions/classifications.csv
      md5: e28c955be1f289a99a20bbc158964b56
      size: 25951
    - path: data/predictions/outliers.csv
      md5: 301e58f86074f616d0d251ea33e3b53a
      size: 22036
    - path: pipelines/inference/compute_metrics.py
      md5: a3cfd501ddf6bdacc9399fc31e66d171
      size: 2575
    outs:
    - path: data/predictions/metrics.json
      md5: 0ff691e214a3e92e3cd6b3384667b768
      size: 128
    - path: data/predictions/roc_curve.csv
      md5: e3ef429db39e0ef2d3f386aee5400829
      size: 4825
